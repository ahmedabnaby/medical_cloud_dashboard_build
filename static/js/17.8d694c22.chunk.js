(this["webpackJsonpekseer-dashboard"]=this["webpackJsonpekseer-dashboard"]||[]).push([[17],{561:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return M}));var a=n(82),c=n.n(a),i=n(107),s=n(13),r=n(0),l=n.n(r),o=n(240),j=n(311),d=n(234),u=n(174),h=n(314),m=n(418),b=n(235),x=n(56),O=n(382),p=n(386),f=n(385),v=n(381),g=n(383),y=n(384),_=n(325),C=n(17),N=n(298),S=n(548),w=n(236),A=n(173),k=n(128),I=n(301),D=n(1),B=function(t){var e="https://backend-test.alsahaba.sa/api",n=Object(r.useState)([]),a=Object(s.a)(n,2),l=a[0],o=a[1],u=Object(r.useState)([]),h=Object(s.a)(u,2),m=h[0],b=h[1],O=Object(r.useState)([]),p=Object(s.a)(O,2),f=p[0],v=p[1],g=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(e,"/consultations/")).then((function(t){o(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(e,"/calls/")).then((function(t){b(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(e,"/users/")).then((function(t){v(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(e,5),a=n[0],c=n[1],i=n[2],r=n[3],l=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(l)};return Object(r.useEffect)((function(){g(),y(),C()}),[]),Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(I.a,{open:null===t||void 0===t?void 0:t.showModal,onClose:null===t||void 0===t?void 0:t.handleCloseConsultation,"aria-labelledby":"total-income-pattern-modal-title","aria-describedby":"total-income-pattern-modal-description",children:Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsx)(d.a,{className:"popup-container",children:Object(D.jsxs)(w.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(D.jsx)(_.a,{id:"closeBtn",onClick:null===t||void 0===t?void 0:t.handleCloseConsultation,children:"X"}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(D.jsxs)(D.Fragment,{children:["consultation_created"===(null===t||void 0===t?void 0:t.payment_status)&&l&&(null===l||void 0===l?void 0:l.filter((function(e){return e.id===(null===t||void 0===t?void 0:t.consultation)})).map((function(t,e){var n=f.find((function(e){return e.id===t.patient_id})),a=f.find((function(e){return e.id===t.doctor_id}));return Object(D.jsxs)(k.a,{title:"Consultation",children:[Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Patient's Name:"}),Object(D.jsx)("strong",{children:n?n.full_name:"N/A"})," ",Object(D.jsxs)("strong",{children:["ID/Iqama ",n?n.iqama_number:"N/A"]})]}),Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Doctor's Name:"}),Object(D.jsx)("strong",{children:a?a.full_name:"N/A"})," ",Object(D.jsxs)("strong",{children:["ID/Iqama ",a?a.iqama_number:"N/A"]})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Chief Complaint:"}),Object(D.jsx)("strong",{children:t.chief_complaint})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"History of Illness:"}),Object(D.jsx)("strong",{children:t.history_of_illness})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Review of systems:"}),Object(D.jsx)("strong",{children:t.review_of_systems})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Examinations:"}),Object(D.jsx)("strong",{children:t.examination})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Assessments/Plans:"}),Object(D.jsx)("strong",{children:t.assessment})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Medication:"}),Object(D.jsx)("strong",{children:t.medication})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Sick leave:"}),Object(D.jsx)("strong",{children:t.sick_leave})]}),Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Created At:"}),Object(D.jsx)("strong",{children:S(t.created_at)})]})]},t.id)}))),"doctor_joined"===(null===t||void 0===t?void 0:t.payment_status)&&m&&(null===m||void 0===m?void 0:m.filter((function(e){return e.payment_id===(null===t||void 0===t?void 0:t.payment_id)})).map((function(t,e){var n=f.find((function(e){return e.id===t.patient_id})),a=f.find((function(e){return e.id===t.doctor_id}));return Object(D.jsxs)(k.a,{title:"Consultation",children:[Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Patient's Name:"}),Object(D.jsx)("strong",{children:n?n.full_name:"N/A"})," ",Object(D.jsxs)("strong",{children:["ID/Iqama ",n?n.iqama_number:"N/A"]})]}),Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Doctor's Name:"}),Object(D.jsx)("strong",{children:a?a.full_name:"N/A"})," ",Object(D.jsxs)("strong",{children:["ID/Iqama ",a?a.iqama_number:"N/A"]})]})]},t.id)}))),"call_initiated"===(null===t||void 0===t?void 0:t.payment_status)&&m&&(null===m||void 0===m?void 0:m.filter((function(e){return e.payment_id===(null===t||void 0===t?void 0:t.payment_id)})).map((function(t,e){var n=f.find((function(e){return e.id===t.patient_id}));return Object(D.jsx)(k.a,{title:"Consultation",children:Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Patient's Name:"}),Object(D.jsx)("strong",{children:n?n.full_name:"N/A"})," ",Object(D.jsxs)("strong",{children:["ID/Iqama ",n?n.iqama_number:"N/A"]})]})},t.id)})))]})})})]})})})})})})},P=function(t){var e,n=l.a.useState(!1),a=Object(s.a)(n,2),c=a[0],i=a[1],o=l.a.useState(!1),h=Object(s.a)(o,2),m=h[0],O=h[1],p=Object(r.useState)([]),f=Object(s.a)(p,2),v=f[0],g=f[1],y=function(t){i(!1),g(t),i(!0),O(!0)};return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(S.a,{children:[c&&Object(D.jsx)(B,{consultation:v,payment_status:t.payment.payment_status,payment_id:t.payment.id,showModal:m,handleCloseConsultation:function(){O(!1)}}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsxs)(d.a,{className:"popup-container",children:[Object(D.jsx)(u.a,{title:"Payment Info"}),Object(D.jsx)(b.a,{}),Object(D.jsxs)(w.a,{className:"popup-body",id:"popupCustom",children:[Object(D.jsx)(_.a,{id:"closeBtn",onClick:function(){return t.handleClose()},children:"X"}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(k.a,{title:t.payment.order_id,children:Object(D.jsx)(j.a,{container:!0,direction:"column",id:"poppins",spacing:1,children:Object(D.jsxs)(j.a,{item:!0,children:[Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Order ID: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.order_id})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Creation Time: \xa0",Object(D.jsx)("span",{id:"small-text",children:function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(e,5),a=n[0],c=n[1],i=n[2],r=n[3],l=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(l)}(t.payment.creation_time)})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Message: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.message})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Status: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.status})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Total Authorized Amount: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.total_authorized_amount})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Total Cuthorized Amount: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.total_captured_amount})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Payment Info: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.payment_info})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Payment Mechanism: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.payment_mechanism})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Brand: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.brand})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Scheme: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.scheme})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Expiry Month: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.expiry_month})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Expiry Month: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.expiry_year})]}),Object(D.jsxs)(A.a,{variant:"h3",gutterBottom:!0,children:["Consultation Status: \xa0",Object(D.jsx)("span",{id:"small-text",children:t.payment.payment_status})]}),(null===t||void 0===t||null===(e=t.payment)||void 0===e?void 0:e.call_id)&&Object(D.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return y(null===t||void 0===t?void 0:t.payment.call_id)},disableElevation:!0,type:"submit",children:"Show Consultation"})]})})})})})]})]})})})]})})},q=Object(o.a)({table:{minWidth:350},searchControl:{width:"100%",paddingRight:"8px",paddingLeft:"16px",marginBottom:"16px",marginTop:"16px"}});function M(){var t=q(),e="https://backend-test.alsahaba.sa/api",n=l.a.useState([]),a=Object(s.a)(n,2),o=a[0],S=a[1],w=l.a.useState(""),A=Object(s.a)(w,2),k=A[0],I=A[1],B=Object(r.useState)(1),M=Object(s.a)(B,2),E=M[0],T=M[1],U=l.a.useState([]),z=Object(s.a)(U,2),F=z[0],L=z[1],R=Object(r.useState)(""),J=Object(s.a)(R,2),W=J[0],X=J[1],H=l.a.useState(!1),V=Object(s.a)(H,2),Y=V[0],G=V[1],K=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(e,"/payments")).then((function(t){S(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(e,"/payment-search?query=").concat(k)).then((function(t){S(t.data),T(1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(e,5),a=n[0],c=n[1],i=n[2],r=n[3],l=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(l)};Object(r.useEffect)((function(){K()}),[]);var $=10*(E-1),tt=$+10,et=o.filter((function(t){return!W||t.status===W})).slice($,tt),nt=10*E>=o.length;return Object(D.jsxs)(l.a.Fragment,{children:[Y&&Object(D.jsx)(P,{payment:F,handleClose:function(){G(!1)}}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsxs)(d.a,{children:[Object(D.jsxs)(j.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(D.jsx)(j.a,{item:!0,children:Object(D.jsx)(u.a,{title:"All Payments"})}),Object(D.jsx)(j.a,{item:!0,children:Object(D.jsxs)("select",{value:W,className:t.searchControl,onChange:function(t){return X(t.target.value)},style:{height:"40px"},children:[Object(D.jsx)("option",{value:"",children:"All Status"}),Object(D.jsx)("option",{value:"CAPTURED",children:"Success"}),Object(D.jsx)("option",{value:"FAILED",children:"Failed"})]})}),Object(D.jsx)(j.a,{item:!0,style:{marginRight:"25px"},children:Object(D.jsx)(h.a,{className:t.searchControl,id:"input-search-profile",value:k,onChange:function(t){""===t.target.value?(I(t.target.value),K()):(I(t.target.value),Q())},placeholder:"Order ID",startAdornment:Object(D.jsx)(m.a,{position:"start",children:Object(D.jsx)(C.V,{stroke:1.5,size:"1.3rem",className:t.startAdornment})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},labelWidth:0})})]}),Object(D.jsx)(b.a,{}),Object(D.jsx)(v.a,{children:Object(D.jsxs)(O.a,{className:t.table,"aria-label":"simple table",children:[Object(D.jsx)(g.a,{children:Object(D.jsxs)(y.a,{children:[Object(D.jsx)(f.a,{children:"#"}),Object(D.jsx)(f.a,{children:"Order ID"}),Object(D.jsx)(f.a,{align:"left",children:"Creation Time"}),Object(D.jsx)(f.a,{align:"left",children:"Message"}),Object(D.jsx)(f.a,{align:"left",children:"Status"}),Object(D.jsx)(f.a,{align:"left",children:"Total Authorized Amount"}),Object(D.jsx)(f.a,{align:"left",children:"Total Captured Amount"}),Object(D.jsx)(f.a,{align:"left",children:"Payment Info"}),Object(D.jsx)(f.a,{align:"left",children:"Consultation Status"})]})}),Object(D.jsx)(p.a,{children:et.map((function(t,e){return Object(D.jsxs)(y.a,{onClick:function(){return function(t){G(!0),L(t)}(t)},children:[Object(D.jsx)(f.a,{align:"left",children:e+1}),Object(D.jsx)(f.a,{component:"th",children:t.order_id}),Object(D.jsx)(f.a,{align:"left",children:Z(t.creation_time)}),Object(D.jsx)(f.a,{align:"left",children:t.message}),Object(D.jsx)(f.a,{align:"left",children:t.status}),Object(D.jsx)(f.a,{align:"left",children:t.total_authorized_amount}),Object(D.jsx)(f.a,{align:"left",children:t.total_captured_amount}),Object(D.jsx)(f.a,{align:"left",children:Object(D.jsxs)("div",{children:[t.payment_mechanism,": "," ",t.payment_info," ",t.expiry_month,"/",t.expiry_year]})}),Object(D.jsx)(f.a,{align:"left",children:t.payment_status?t.payment_status:"none"})]},t.id)}))})]})}),Object(D.jsxs)(j.a,{container:!0,justifyContent:"center",children:[" ",E>1&&Object(D.jsx)(_.a,{onClick:function(){T((function(t){return Math.max(t-1,1)}))},variant:"outlined",children:"Show Previous Page"}),!nt&&Object(D.jsx)(_.a,{onClick:function(){T((function(t){return t+1}))},variant:"outlined",children:"Show More"})]})]})})})]})}}}]);
//# sourceMappingURL=17.8d694c22.chunk.js.map