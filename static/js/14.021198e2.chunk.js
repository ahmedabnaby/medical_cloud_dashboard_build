(this["webpackJsonpekseer-dashboard"]=this["webpackJsonpekseer-dashboard"]||[]).push([[14],{365:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var a=n(82),c=n.n(a),i=n(107),r=n(13),s=n(0),o=n(311),l=n(234),d=n(174),j=n(235),u=n(236),b=n(325),h=n(56),O=n(423),p=n(128),x=n(298),m=n(1),f=function(t){var e=Object(s.useState)(!1),n=Object(r.a)(e,2),a=(n[0],n[1],function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)({method:"DELETE",url:"".concat("https://backend-test.alsahaba.sa/api","/user/").concat(null===t||void 0===t?void 0:t.patient.id,"/delete")}).then((function(t){window.location.reload()})).catch((function(t){alert("An error occured!")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(O.a,{children:Object(m.jsx)(o.a,{container:!0,spacing:h.b,children:Object(m.jsx)(o.a,{item:!0,xs:12,children:Object(m.jsxs)(l.a,{className:"popup-container",children:[Object(m.jsx)(d.a,{title:"Consultation"}),Object(m.jsx)(j.a,{}),Object(m.jsxs)(u.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(m.jsx)(b.a,{id:"closeBtn",onClick:null===t||void 0===t?void 0:t.handleClose,children:"X"}),Object(m.jsx)(o.a,{container:!0,spacing:h.b,children:Object(m.jsx)(o.a,{item:!0,xs:12,sm:6,children:Object(m.jsxs)(p.a,{title:null===t||void 0===t?void 0:t.patient.full_name,children:[Object(m.jsxs)("h2",{children:["Are you sure you want to delete this ",(null===t||void 0===t?void 0:t.patient.is_doctor)?"doctor?":"patient?"]}),Object(m.jsx)(b.a,{style:{color:"red"},onClick:a,children:"Yes"}),Object(m.jsx)(b.a,{style:{color:"green"},onClick:null===t||void 0===t?void 0:t.handleClose,children:"No"})]})})})]})]})})})})})}},383:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n(82),c=n.n(a),i=n(107),r=n(13),s=n(0),o=n(311),l=n(234),d=n(174),j=n(235),u=n(236),b=n(325),h=n(56),O=n(423),p=n(557),x=n(128),m=n(298),f=n(1),v=function(t){return Object(s.useEffect)((function(){document.getElementById("image-viewer2").style.display="block"}),[]),Object(f.jsx)(O.a,{id:"image-viewer2",children:Object(f.jsx)(o.a,{container:!0,spacing:h.b,children:Object(f.jsx)(o.a,{item:!0,xs:12,children:Object(f.jsxs)(l.a,{className:"popup-container",children:[Object(f.jsx)(d.a,{title:"Consultation"}),Object(f.jsx)(j.a,{}),Object(f.jsxs)(u.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(f.jsx)(b.a,{id:"closeBtn",onClick:function(){null===t||void 0===t||t.handleCloseShowSelectedConsultation()},children:"X"}),Object(f.jsx)(o.a,{container:!0,spacing:h.b,children:Object(f.jsx)(o.a,{item:!0,xs:12,sm:6,children:Object(f.jsxs)(x.a,{title:"Consultation",children:[Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Chief Complaint:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.chief_complaint})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"History of Illness:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.history_of_illness})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Review of systems:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.review_of_systems})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Examinations:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.examination})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Assessments/Plans:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.assessment})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Medication:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.medication})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Order labs:"}),Object(f.jsx)("strong",{children:(null===t||void 0===t?void 0:t.consultation.order_labs)?null===t||void 0===t?void 0:t.consultation.order_labs:"none"})]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Order labs uploads:"}),(null===t||void 0===t?void 0:t.consultation.upload_order_labs)?Object(f.jsx)("a",{href:null===t||void 0===t?void 0:t.consultation.upload_order_labs,children:"View file/image"}):"none"]}),Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)("h5",{children:"Sick leave:"}),Object(f.jsx)("strong",{children:null===t||void 0===t?void 0:t.consultation.sick_leave})]}),Object(f.jsxs)("div",{className:"mt-4 mb-4",children:[Object(f.jsx)("h5",{children:"Created At:"}),Object(f.jsx)("strong",{children:function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(r.a)(e,5),a=n[0],c=n[1],i=n[2],s=n[3],o=n[4],l=a.toUpperCase();return"".concat(c," ").concat(l," ").concat(i," ").concat(s," ").concat(o)}(null===t||void 0===t?void 0:t.consultation.created_at)})]})]})})})]})]})})})})},g=function(t){var e="https://backend-test.alsahaba.sa/api",n=Object(s.useState)([]),a=Object(r.a)(n,2),g=a[0],y=a[1],w=Object(s.useState)([]),_=Object(r.a)(w,2),C=_[0],k=_[1],S=Object(s.useState)(null),N=Object(r.a)(S,2),E=N[0],B=N[1],D=Object(s.useState)(!1),I=Object(r.a)(D,2),q=I[0],L=I[1],P=Object(s.useState)(!1),U=Object(r.a)(P,2),A=U[0],F=U[1],R=Object(s.useState)(!1),X=Object(r.a)(R,2),Y=(X[0],X[1]),M=function(){var n=Object(i.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Y(!0),n.next=3,m.a.get("".concat(e,"/consultations/")).then((function(e){var n;y(e.data),Y(!1);var a=0;if(!1===(null===t||void 0===t||null===(n=t.patient)||void 0===n?void 0:n.is_doctor))for(;a<e.data.length;){if(e.data[a].patient_id===(null===t||void 0===t?void 0:t.patient.id)){L(!0);break}L(!1),a++}else for(;a<e.data.length;){if(e.data[a].doctor_id===(null===t||void 0===t?void 0:t.patient.id)){L(!0);break}L(!1),a++}}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),J=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("".concat(e,"/users/")).then((function(t){k(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(r.a)(e,5),a=n[0],c=n[1],i=n[2],s=n[3],o=n[4],l=a.toUpperCase();return"".concat(c," ").concat(l," ").concat(i," ").concat(s," ").concat(o)};return Object(s.useEffect)((function(){document.getElementById("image-viewer").style.display="block",M(),J()}),[]),Object(f.jsxs)(f.Fragment,{children:[A&&Object(f.jsx)(v,{consultation:E,handleCloseShowSelectedConsultation:function(){F(!1)}}),Object(f.jsx)(O.a,{id:"image-viewer",onClick:function(){document.getElementById("image-viewer").style.display="none"},children:Object(f.jsx)(o.a,{container:!0,spacing:h.b,children:Object(f.jsx)(o.a,{item:!0,xs:12,children:Object(f.jsxs)(l.a,{className:"popup-container",children:[Object(f.jsx)(d.a,{title:"Consultation"}),Object(f.jsx)(j.a,{}),Object(f.jsxs)(u.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(f.jsx)(b.a,{id:"closeBtn",onClick:null===t||void 0===t?void 0:t.handleCloseConsultations,children:"X"}),Object(f.jsx)(o.a,{container:!0,spacing:h.b,children:Object(f.jsx)(o.a,{item:!0,xs:12,sm:6,children:Object(f.jsx)(x.a,{title:null===t||void 0===t?void 0:t.patient.full_name,children:q?Object(f.jsx)(f.Fragment,{children:g&&(null===g||void 0===g?void 0:g.filter((function(e){var n,a,c;return(null===t||void 0===t||null===(n=t.patient)||void 0===n?void 0:n.is_doctor)?e.doctor_id===(null===t||void 0===t||null===(a=t.patient)||void 0===a?void 0:a.id):e.patient_id===(null===t||void 0===t||null===(c=t.patient)||void 0===c?void 0:c.id)})).map((function(e,n){return Object(f.jsx)(p.a,{as:"ol",className:"borderBottom",children:null===C||void 0===C?void 0:C.filter((function(n){var a;return(null===t||void 0===t||null===(a=t.patient)||void 0===a?void 0:a.is_doctor)?e.patient_id===n.id:e.doctor_id===n.id})).map((function(a){var c;return Object(f.jsxs)(p.a.Item,{as:"li",className:"d-flex justify-content-between align-items-center",style:{cursor:"pointer",marginLeft:"-25px"},onClick:function(){return B(e),void F(!0)},children:[n+1,".",Object(f.jsxs)("div",{className:"ms-2 me-auto",children:[Object(f.jsx)("div",{className:"fw-bold",children:e.chief_complaint}),Object(f.jsx)("strong",{style:{color:"gray"},children:(null===t||void 0===t||null===(c=t.patient)||void 0===c?void 0:c.is_doctor)?Object(f.jsxs)("p",{children:[" ","Patient ID/Iqama: \xa0",a.iqama_number]}):Object(f.jsxs)("p",{children:[" ","Dr. ID/Iqama: \xa0",a.iqama_number]})}),Object(f.jsx)("br",{}),Object(f.jsx)("strong",{children:a.full_name})]}),Object(f.jsx)("strong",{children:T(e.created_at)})]},a.id)}))},e.id)})))}):Object(f.jsx)("h5",{className:"ml-4",children:"No consultations yet!"})})})})]})]})})})})]})}},563:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return A}));var a=n(3),c=n(14),i=n(82),r=n.n(i),s=n(107),o=n(13),l=n(0),d=n.n(l),j=n(240),u=n(311),b=n(234),h=n(174),O=n(314),p=n(382),x=n(235),m=n(56),f=n(414),v=n(418),g=n(417),y=n(413),w=n(415),_=n(416),C=n(17),k=n(298),S=n(423),N=n(236),E=n(325),B=n(173),D=n(128),I=n(383),q=n(1),L=function(t){var e=d.a.useState(!1),n=Object(o.a)(e,2),a=n[0],c=n[1],i=d.a.useState([]),j=Object(o.a)(i,2),O=j[0],p=j[1],f=d.a.useState(!1),v=Object(o.a)(f,2),g=(v[0],v[1]);return Object(l.useEffect)((function(){var t=function(){var t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",new Promise((function(t){var e=new Image;e.onload=function(){t(!0)},e.onerror=function(){t(!1)}})));case 4:return t.prev=4,t.t0=t.catch(0),console.error("Error checking file type:",t.t0),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(){return t.apply(this,arguments)}}();(function(){var e=Object(s.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,g(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(q.jsxs)(q.Fragment,{children:[a&&Object(q.jsx)(I.a,{patient:O,handleCloseConsultations:function(){c(!1)}}),Object(q.jsx)(S.a,{children:Object(q.jsx)(u.a,{container:!0,spacing:m.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsxs)(b.a,{className:"popup-container",children:[Object(q.jsx)(h.a,{title:"Consultation"}),Object(q.jsx)(x.a,{}),Object(q.jsxs)(N.a,{className:"popup-body",id:"popupCustom",children:[Object(q.jsx)(E.a,{id:"closeBtn",onClick:function(){return t.handleClose()},children:"X"}),Object(q.jsx)(u.a,{container:!0,spacing:m.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(q.jsx)(D.a,{title:t.patient.full_name,children:Object(q.jsx)(u.a,{container:!0,direction:"column",id:"poppins",spacing:1,children:Object(q.jsxs)(u.a,{item:!0,children:[Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Patient name: \xa0",Object(q.jsx)("span",{id:"small-text",children:t.patient.full_name})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["ID/Iqama number: \xa0",Object(q.jsx)("span",{id:"small-text",children:t.patient.iqama_number})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Date of birth: \xa0",Object(q.jsx)("span",{id:"small-text",children:t.patient.date_of_birth})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Mobile number: \xa0",Object(q.jsx)("span",{id:"small-text",children:t.patient.mobile_number})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["E-mail: \xa0",Object(q.jsx)("span",{id:"small-text",children:t.patient.email})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Nationality: \xa0",Object(q.jsx)("span",{id:"small-text",children:t.patient.nationality})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Last login: \xa0",Object(q.jsx)("span",{id:"small-text",children:function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(o.a)(e,5),a=n[0],c=n[1],i=n[2],r=n[3],s=n[4],l=a.toUpperCase();return"".concat(c," ").concat(l," ").concat(i," ").concat(r," ").concat(s)}(t.patient.last_login)})]}),Object(q.jsx)(E.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit",onClick:function(){return e=t.patient,c(!0),void p(e);var e},children:"Show Consultations"})]})})})})})]})]})})})})]})},P=n(365),U=Object(j.a)({table:{minWidth:350},searchControl:{width:"100%",paddingRight:"8px",paddingLeft:"16px",marginBottom:"16px",marginTop:"16px"}});function A(){var t=U(),e="https://backend-test.alsahaba.sa/api",n=d.a.useState([]),i=Object(o.a)(n,2),j=i[0],S=i[1],N=d.a.useState([]),E=Object(o.a)(N,2),B=E[0],D=E[1],I=d.a.useState(""),A=Object(o.a)(I,2),F=A[0],R=A[1],X=d.a.useState(!1),Y=Object(o.a)(X,2),M=Y[0],J=Y[1],T=d.a.useState(!1),V=Object(o.a)(T,2),W=V[0],z=V[1],H=d.a.useState({}),G=Object(o.a)(H,2),K=G[0],Q=G[1],Z=function(){var t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("".concat(e,"/users/")).then((function(t){S(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("".concat(e,"/search?query=").concat(F)).then((function(t){S(t.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),tt=function(t){var e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(o.a)(e,5),a=n[0],c=n[1],i=n[2],r=n[3],s=n[4],l=a.toUpperCase();return"".concat(c," ").concat(l," ").concat(i," ").concat(r," ").concat(s)};return Object(l.useEffect)((function(){var t=function(){var t=Object(s.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",new Promise((function(t,e){var n=new Image;n.onload=function(){t(!0)},n.onerror=function(){t(!1)}})));case 4:return t.prev=4,t.t0=t.catch(0),console.error("Error checking file type for patient ".concat(e.id,":"),t.t0),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e){return t.apply(this,arguments)}}();(function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===j||void 0===j||j.filter((function(t){return!t.is_doctor})).forEach(function(){var e=Object(s.a)(r.a.mark((function e(n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K[n.id]){e.next=5;break}return e.next=3,t(n);case 3:i=e.sent,Q(i?function(t){return Object(c.a)(Object(c.a)({},t),{},Object(a.a)({},n.id,"image"))}:function(t){return Object(c.a)(Object(c.a)({},t),{},Object(a.a)({},n.id,"non-image"))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j]),Object(l.useEffect)((function(){Z()}),[]),Object(q.jsxs)(d.a.Fragment,{children:[M&&Object(q.jsx)(L,{patient:B,handleClose:function(){J(!1)}}),W&&Object(q.jsx)(P.a,{patient:B,handleClose:function(){z(!1)}}),Object(q.jsx)(u.a,{container:!0,spacing:m.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsxs)(b.a,{children:[Object(q.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(q.jsx)(u.a,{item:!0,children:Object(q.jsx)(h.a,{title:"Registered Patients"})}),Object(q.jsx)(u.a,{item:!0,style:{marginRight:"25px"},children:Object(q.jsx)(O.a,{className:t.searchControl,id:"input-search-profile",value:F,onChange:function(t){""===t.target.value?(R(t.target.value),Z()):(R(t.target.value),$())},placeholder:"Search patients",startAdornment:Object(q.jsx)(p.a,{position:"start",children:Object(q.jsx)(C.V,{stroke:1.5,size:"1.3rem",className:t.startAdornment})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},labelWidth:0})})]}),Object(q.jsx)(x.a,{}),Object(q.jsx)(y.a,{children:Object(q.jsxs)(f.a,{className:t.table,"aria-label":"simple table",children:[Object(q.jsx)(w.a,{children:Object(q.jsxs)(_.a,{children:[Object(q.jsx)(g.a,{children:"#"}),Object(q.jsx)(g.a,{children:"Patient name"}),Object(q.jsx)(g.a,{align:"left",children:"ID/Iqama number"}),Object(q.jsx)(g.a,{align:"left",style:{whiteSpace:"nowrap"},children:"Date of birth"}),Object(q.jsx)(g.a,{align:"left",children:"Mobile number"}),Object(q.jsx)(g.a,{align:"left",children:"E-mail"}),Object(q.jsx)(g.a,{align:"left",children:"Nationality"}),Object(q.jsx)(g.a,{align:"left",children:"Registered date"}),Object(q.jsx)(g.a,{align:"left",children:"Last login"}),Object(q.jsx)(g.a,{align:"left"}),Object(q.jsx)(g.a,{align:"left"})]})}),Object(q.jsx)(v.a,{children:j&&(null===j||void 0===j?void 0:j.filter((function(t){return!t.is_doctor})).map((function(t,e){return Object(q.jsxs)(_.a,{children:[Object(q.jsx)(g.a,{align:"left",children:e+1}),Object(q.jsx)(g.a,{component:"th",children:t.full_name}),Object(q.jsx)(g.a,{align:"left",children:t.iqama_number}),Object(q.jsx)(g.a,{align:"left",children:t.date_of_birth}),Object(q.jsx)(g.a,{align:"left",children:t.mobile_number}),Object(q.jsx)(g.a,{align:"left",children:t.email}),Object(q.jsx)(g.a,{align:"left",children:t.nationality}),Object(q.jsx)(g.a,{align:"left",children:tt(t.created_at)}),Object(q.jsx)(g.a,{align:"left",children:tt(t.last_login)}),Object(q.jsx)(g.a,{align:"left",onClick:function(){return function(t){J(!0),D(t)}(t)},children:Object(q.jsx)("img",{src:"images/eye.png",id:"delete-icon"})}),Object(q.jsx)(g.a,{align:"left",onClick:function(){return function(t){z(!0),D(t)}(t)},children:Object(q.jsx)("img",{src:"images/trash-bin.png",id:"delete-icon"})})]},t.id)})))})]})})]})})})]})}}}]);
//# sourceMappingURL=14.021198e2.chunk.js.map